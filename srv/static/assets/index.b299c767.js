const Te=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}};Te();const I={},We=(n,e)=>n===e,Me=Symbol("solid-track"),z={equals:We};let ke=Fe;const N={},D=1,ee=2,Ae={owned:null,cleanups:null,context:null,owner:null};var g=null;let W=null,d=null,T=null,y=null,_=null,le=0;function J(n,e){const t=d,s=g,i=n.length===0?Ae:{owned:null,cleanups:null,context:null,owner:e||s};g=i,d=null;try{return de(()=>n(()=>ae(i)),!0)}finally{d=t,g=s}}function ue(n,e){e=e?Object.assign({},z,e):z;const t={value:n,observers:null,observerSlots:null,pending:N,comparator:e.equals||void 0},s=i=>(typeof i=="function"&&(i=i(t.pending!==N?t.pending:t.value)),fe(t,i));return[Pe.bind(t),s]}function B(n,e,t){const s=Re(n,e,!1,D);se(s)}function Ue(n,e,t){t=t?Object.assign({},z,t):z;const s=Re(n,e,!0,0);return s.pending=N,s.observers=null,s.observerSlots=null,s.comparator=t.equals||void 0,se(s),Pe.bind(s)}function He(n){if(T)return n();let e;const t=T=[];try{e=n()}finally{T=null}return de(()=>{for(let s=0;s<t.length;s+=1){const i=t[s];if(i.pending!==N){const o=i.pending;i.pending=N,fe(i,o)}}},!1),e}function ce(n){let e,t=d;return d=null,e=n(),d=t,e}function Ke(n){return g===null||(g.cleanups===null?g.cleanups=[n]:g.cleanups.push(n)),n}function Pe(){const n=W;if(this.sources&&(this.state||n)){const e=y;y=null,this.state===D||n?se(this):te(this),y=e}if(d){const e=this.observers?this.observers.length:0;d.sources?(d.sources.push(this),d.sourceSlots.push(e)):(d.sources=[this],d.sourceSlots=[e]),this.observers?(this.observers.push(d),this.observerSlots.push(d.sources.length-1)):(this.observers=[d],this.observerSlots=[d.sources.length-1])}return this.value}function fe(n,e,t){if(T)return n.pending===N&&T.push(n),n.pending=e,e;if(n.comparator&&n.comparator(n.value,e))return e;let s=!1;return n.value=e,n.observers&&n.observers.length&&de(()=>{for(let i=0;i<n.observers.length;i+=1){const o=n.observers[i];s&&W.disposed.has(o),(s&&!o.tState||!s&&!o.state)&&(o.pure?y.push(o):_.push(o),o.observers&&Ne(o)),s||(o.state=D)}if(y.length>1e6)throw y=[],new Error},!1),e}function se(n){if(!n.fn)return;ae(n);const e=g,t=d,s=le;d=g=n,Ve(n,n.value,s),d=t,g=e}function Ve(n,e,t){let s;try{s=n.fn(e)}catch(i){Le(i)}(!n.updatedAt||n.updatedAt<=t)&&(n.observers&&n.observers.length?fe(n,s):n.value=s,n.updatedAt=t)}function Re(n,e,t,s=D,i){const o={fn:n,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:g,context:null,pure:t};return g===null||g!==Ae&&(g.owned?g.owned.push(o):g.owned=[o]),o}function Ee(n){const e=W;if(n.state===0||e)return;if(n.state===ee||e)return te(n);if(n.suspense&&ce(n.suspense.inFallback))return n.suspense.effects.push(n);const t=[n];for(;(n=n.owner)&&(!n.updatedAt||n.updatedAt<le);)(n.state||e)&&t.push(n);for(let s=t.length-1;s>=0;s--)if(n=t[s],n.state===D||e)se(n);else if(n.state===ee||e){const i=y;y=null,te(n,t[0]),y=i}}function de(n,e){if(y)return n();let t=!1;e||(y=[]),_?t=!0:_=[],le++;try{const s=n();return je(t),s}catch(s){Le(s)}finally{y=null,t||(_=null)}}function je(n){y&&(Fe(y),y=null),!n&&(_.length?He(()=>{ke(_),_=null}):_=null)}function Fe(n){for(let e=0;e<n.length;e++)Ee(n[e])}function te(n,e){const t=W;n.state=0;for(let s=0;s<n.sources.length;s+=1){const i=n.sources[s];i.sources&&(i.state===D||t?i!==e&&Ee(i):(i.state===ee||t)&&te(i,e))}}function Ne(n){const e=W;for(let t=0;t<n.observers.length;t+=1){const s=n.observers[t];(!s.state||e)&&(s.state=ee,s.pure?y.push(s):_.push(s),s.observers&&Ne(s))}}function ae(n){let e;if(n.sources)for(;n.sources.length;){const t=n.sources.pop(),s=n.sourceSlots.pop(),i=t.observers;if(i&&i.length){const o=i.pop(),r=t.observerSlots.pop();s<i.length&&(o.sourceSlots[r]=s,i[s]=o,t.observerSlots[s]=r)}}if(n.owned){for(e=0;e<n.owned.length;e++)ae(n.owned[e]);n.owned=null}if(n.cleanups){for(e=0;e<n.cleanups.length;e++)n.cleanups[e]();n.cleanups=null}n.state=0,n.context=null}function Le(n){throw n}const Qe=Symbol("fallback");function qe(n){for(let e=0;e<n.length;e++)n[e]()}function Ye(n,e,t={}){let s=[],i=[],o=[],r=0,l=e.length>1?[]:null;return Ke(()=>qe(o)),()=>{let a=n()||[],f,u;return a[Me],ce(()=>{let h=a.length,p,A,O,k,U,m,$,S,E;if(h===0)r!==0&&(qe(o),o=[],s=[],i=[],r=0,l&&(l=[])),t.fallback&&(s=[Qe],i[0]=J(Ie=>(o[0]=Ie,t.fallback())),r=1);else if(r===0){for(i=new Array(h),u=0;u<h;u++)s[u]=a[u],i[u]=J(v);r=h}else{for(O=new Array(h),k=new Array(h),l&&(U=new Array(h)),m=0,$=Math.min(r,h);m<$&&s[m]===a[m];m++);for($=r-1,S=h-1;$>=m&&S>=m&&s[$]===a[S];$--,S--)O[S]=i[$],k[S]=o[$],l&&(U[S]=l[$]);for(p=new Map,A=new Array(S+1),u=S;u>=m;u--)E=a[u],f=p.get(E),A[u]=f===void 0?-1:f,p.set(E,u);for(f=m;f<=$;f++)E=s[f],u=p.get(E),u!==void 0&&u!==-1?(O[u]=i[f],k[u]=o[f],l&&(U[u]=l[f]),u=A[u],p.set(E,u)):o[f]();for(u=m;u<h;u++)u in O?(i[u]=O[u],o[u]=k[u],l&&(l[u]=U[u],l[u](u))):i[u]=J(v);i=i.slice(0,r=h),s=a.slice(0)}return i});function v(h){if(o[u]=h,l){const[p,A]=ue(u);return l[u]=A,e(a[u],p)}return e(a[u])}}}function w(n,e){return ce(()=>n(e||{}))}function he(n){const e="fallback"in n&&{fallback:()=>n.fallback};return Ue(Ye(()=>n.each,n.children,e||void 0))}function Xe(n,e,t){let s=t.length,i=e.length,o=s,r=0,l=0,a=e[i-1].nextSibling,f=null;for(;r<i||l<o;){if(e[r]===t[l]){r++,l++;continue}for(;e[i-1]===t[o-1];)i--,o--;if(i===r){const u=o<s?l?t[l-1].nextSibling:t[o-l]:a;for(;l<o;)n.insertBefore(t[l++],u)}else if(o===l)for(;r<i;)(!f||!f.has(e[r]))&&e[r].remove(),r++;else if(e[r]===t[o-1]&&t[l]===e[i-1]){const u=e[--i].nextSibling;n.insertBefore(t[l++],e[r++].nextSibling),n.insertBefore(t[--o],u),e[i]=t[o]}else{if(!f){f=new Map;let v=l;for(;v<o;)f.set(t[v],v++)}const u=f.get(e[r]);if(u!=null)if(l<u&&u<o){let v=r,h=1,p;for(;++v<i&&v<o&&!((p=f.get(e[v]))==null||p!==u+h);)h++;if(h>u-l){const A=e[r];for(;l<u;)n.insertBefore(t[l++],A)}else n.replaceChild(t[l++],e[r++])}else r++;else e[r++].remove()}}}function Ze(n,e,t){let s;return J(i=>{s=i,e===document?n():P(e,n(),e.firstChild?null:void 0,t)}),()=>{s(),e.textContent=""}}function M(n,e,t){const s=document.createElement("template");s.innerHTML=n;let i=s.content.firstChild;return t&&(i=i.firstChild),i}function L(n,e){e==null?n.removeAttribute("class"):n.className=e}function ge(n,e,t={}){const s=n.style,i=typeof t=="string";if(e==null&&i||typeof e=="string")return s.cssText=e;i&&(s.cssText=void 0,t={}),e||(e={});let o,r;for(r in t)e[r]==null&&s.removeProperty(r),delete t[r];for(r in e)o=e[r],o!==t[r]&&(s.setProperty(r,o),t[r]=o);return t}function P(n,e,t,s){if(t!==void 0&&!s&&(s=[]),typeof e!="function")return ne(n,e,s,t);B(i=>ne(n,e(),i,t),s)}function ne(n,e,t,s,i){for(I.context&&!t&&(t=[...n.childNodes]);typeof t=="function";)t=t();if(e===t)return t;const o=typeof e,r=s!==void 0;if(n=r&&t[0]&&t[0].parentNode||n,o==="string"||o==="number"){if(I.context)return t;if(o==="number"&&(e=e.toString()),r){let l=t[0];l&&l.nodeType===3?l.data=e:l=document.createTextNode(e),t=F(n,t,s,l)}else t!==""&&typeof t=="string"?t=n.firstChild.data=e:t=n.textContent=e}else if(e==null||o==="boolean"){if(I.context)return t;t=F(n,t,s)}else{if(o==="function")return B(()=>{let l=e();for(;typeof l=="function";)l=l();t=ne(n,l,t,s)}),()=>t;if(Array.isArray(e)){const l=[];if(ie(l,e,i))return B(()=>t=ne(n,l,t,s,!0)),()=>t;if(I.context){for(let a=0;a<l.length;a++)if(l[a].parentNode)return t=l}if(l.length===0){if(t=F(n,t,s),r)return t}else Array.isArray(t)?t.length===0?Ce(n,l,s):Xe(n,t,l):(t&&F(n),Ce(n,l));t=l}else if(e instanceof Node){if(I.context&&e.parentNode)return t=r?[e]:e;if(Array.isArray(t)){if(r)return t=F(n,t,s,e);F(n,t,null,e)}else t==null||t===""||!n.firstChild?n.appendChild(e):n.replaceChild(e,n.firstChild);t=e}}return t}function ie(n,e,t){let s=!1;for(let i=0,o=e.length;i<o;i++){let r=e[i],l;if(r instanceof Node)n.push(r);else if(!(r==null||r===!0||r===!1))if(Array.isArray(r))s=ie(n,r)||s;else if((l=typeof r)=="string")n.push(document.createTextNode(r));else if(l==="function")if(t){for(;typeof r=="function";)r=r();s=ie(n,Array.isArray(r)?r:[r])||s}else n.push(r),s=!0;else n.push(document.createTextNode(r.toString()))}return s}function Ce(n,e,t){for(let s=0,i=e.length;s<i;s++)n.insertBefore(e[s],t)}function F(n,e,t,s){if(t===void 0)return n.textContent="";const i=s||document.createTextNode("");if(e.length){let o=!1;for(let r=e.length-1;r>=0;r--){const l=e[r];if(i!==l){const a=l.parentNode===n;!o&&!r?a?n.replaceChild(i,l):n.insertBefore(i,t):a&&l.remove()}else o=!0}}else n.insertBefore(i,t);return[i]}class x{constructor(e,t){this.x=e,this.y=t}add=e=>new x(this.x+e.x,this.y+e.y);equals=e=>this.x==e.x&&this.y==e.y}class c{color="#FFFFFF";constructor(e,t,s){this.relative=new x(e,t),this.color=s}getRelative=()=>this.relative;getColor=()=>this.color}const Ge=n=>(Je(n),ze(n),n),Je=n=>{for(let e=0;e<n.length;e++)for(let t=e;t<n[0].length;t++){let s=n[e][t];n[e][t]=n[t][e],n[t][e]=s}return n},ze=n=>{for(let e=0;e<n.length;e++)n[e].reverse();return n},et=n=>{for(var e=[],t=0;t<n;t++){e[t]=[];for(var s=0;s<n;s++)e[t][s]=null}return{fillWithData:i=>(i.forEach(o=>e[o.getRelative().x-1][o.getRelative().y-1]=o),e)}},tt=n=>{let e=[],t=null;for(let s=0;s<n.length;s++)for(let i=0;i<n[s].length;i++)(t=n[s][i])&&e.push(new c(s+1,i+1,t?.getColor()));return e},nt=(n,e)=>{let t=et(n).fillWithData(e);return tt(Ge(t))};class R{dimension=3;position=new x(3,0);body=[];constructor(e){e&&(this.dimension=e.getDimension(),this.position=new x(e.getPos().x,e.getPos().y),this.body=e.render())}moveBottom=e=>this.copyWith(this,t=>{for(let s=e.bounds().top;s<=e.bounds().bottom+3;s++)if(!t.fitsInHeight(e,s))return t.setYPos(s-1),t;return t});moveDown=()=>this.copyWith(this,e=>(e.setYPos(e.getPos().y+1),e));moveLeft=()=>this.copyWith(this,e=>(e.setXPos(e.getPos().x-1),e));moveRight=()=>this.copyWith(this,e=>(e.setXPos(e.getPos().x+1),e));rotate=()=>this.copyWith(this,e=>(e.setBody(nt(e.getDimension(),e.render())),e));getPos=()=>this.position;getDimension=()=>this.dimension;render=()=>this.body;setYPos=e=>this.position=new x(this.getPos().x,e);setXPos=e=>this.position=new x(e,this.getPos().y);fitsIn=e=>!this.body.some(t=>!e.inBounds(this.getPos().add(t.getRelative())))&&!this.body.some(t=>e.onSquare(t.getRelative().add(this.getPos())));fitsInHeight=(e,t)=>!this.body.some(s=>!e.inBounds(new x(this.getPos().x,t).add(s.getRelative())))&&!this.body.some(s=>e.onSquare(s.getRelative().add(new x(this.getPos().x,t))));setBody=e=>this.body=e;setDimension=e=>this.dimension=e}const H="#FFFFFF";class ye extends R{constructor(e){super(e),e||this.setBody([new c(1,2,H),new c(2,2,H),new c(3,2,H),new c(3,3,H)])}copyWith=(e,t)=>t(new ye(e))}const K="#FFFF00";class we extends R{constructor(e){super(e),e||this.setBody([new c(1,2,K),new c(2,2,K),new c(3,2,K),new c(3,1,K)])}copyWith=(e,t)=>t(new we(e))}const V="#0000FF";class ve extends R{constructor(e){super(e),e||(this.setBody([new c(1,1,V),new c(1,2,V),new c(2,1,V),new c(2,2,V)]),this.setDimension(2))}copyWith=(e,t)=>t(new ve(e))}const j="#00FFFF";class pe extends R{constructor(e){super(e),e||this.setBody([new c(3,1,j),new c(2,1,j),new c(2,2,j),new c(1,2,j)])}copyWith=(e,t)=>t(new pe(e))}const Q="#00FF00";class me extends R{constructor(e){super(e),e||(this.setBody([new c(1,2,Q),new c(2,2,Q),new c(3,2,Q),new c(4,2,Q)]),this.setDimension(4))}copyWith=(e,t)=>t(new me(e))}const Y="#FF0000";class $e extends R{constructor(e){super(e),e||this.setBody([new c(2,2,Y),new c(3,3,Y),new c(3,2,Y),new c(3,1,Y)])}copyWith=(e,t)=>t(new $e(e))}const X="#FF00FF";class be extends R{constructor(e){super(e),e||this.setBody([new c(1,1,X),new c(2,1,X),new c(2,2,X),new c(3,2,X)])}copyWith=(e,t)=>t(new be(e))}const Se=()=>{switch(Math.floor(Math.random()*10)){case 2:return new ve;case 3:return new pe;case 4:return new be;case 5:return new me;case 6:return new $e;case 7:return new ye;case 8:return new we;default:return Se()}},Be=38.3,b={top:0,bottom:22,left:0,right:10};class De{squares=[];constructor(e){e&&(this.squares=e.getSquares())}collapseLines=e=>(e.reverse().forEach(t=>{let s=this.squares.filter(i=>i.getRelative().y<t);this.squares=this.squares.filter(i=>i.getRelative().y>t),s.map(i=>new c(i.getRelative().x,i.getRelative().y+1,i.getColor())).forEach(i=>this.squares.push(i))}),this);checkLines=()=>{let e=[];for(let t=b.bottom;t>=b.top;t--)this.squares.filter(s=>s.getRelative().y==t).length==b.right&&(this.squares=this.squares.filter(s=>s.getRelative().y!=t),e.push(t));return e};addSquares=e=>(e.render().forEach(t=>{let s=e.getPos().add(t.getRelative());this.squares.push(new c(s.x,s.y,t.getColor()))}),this);inBounds=e=>e.x>b.left&&e.x<=b.right&&e.y>=b.top&&e.y<=b.bottom;onSquare=e=>this.squares.some(t=>t.getRelative().equals(e));getWidth=()=>b.right*Be;getHeight=()=>b.bottom*Be;bounds=()=>b;getSquares=()=>this.squares}const st="_BoardView_1ye85_1",it="_Board_1ye85_1",ot="_Debris_1ye85_35";var oe={BoardView:st,Board:it,Debris:ot};const rt="_Shape_nguzn_1",lt="_Square_nguzn_17";var xe={Shape:rt,Square:lt};const ut=M("<div></div>");function _e(n){return(()=>{const e=ut.cloneNode(!0);return B(t=>{const s=n.square.getRelative().x,i=n.square.getRelative().y,o=n.color||n.square.getColor(),r=xe.Square;return s!==t._v$&&e.style.setProperty("grid-column",t._v$=s),i!==t._v$2&&e.style.setProperty("grid-row",t._v$2=i),o!==t._v$3&&e.style.setProperty("background-color",t._v$3=o),r!==t._v$4&&L(e,t._v$4=r),t},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),e})()}const ct=M("<div></div>"),ft=n=>({width:`${n.getWidth()}px`,height:`${n.getHeight()}px`,"grid-template-columns":`repeat(${n.bounds().right}, 1fr)`,"grid-template-rows":`repeat(${n.bounds().bottom}, 1fr)`});function dt(n){return(()=>{const e=ct.cloneNode(!0);return P(e,w(he,{get each(){return n.board.getSquares()},children:t=>w(_e,{color:void 0,square:t})})),B(t=>{const s=oe.Debris,i=ft(n.board);return s!==t._v$&&L(e,t._v$=s),t._v$2=ge(e,i,t._v$2),t},{_v$:void 0,_v$2:void 0}),e})()}const at=M("<div></div>"),Z=38.3,ht="rgba(255, 255, 255, 0.5)",gt=(n,e)=>{for(let t=n.bounds().top;t<=n.bounds().bottom;t++)if(!e.fitsInHeight(n,t))return t-1;return 0},yt=(n,e)=>({width:`${e.getDimension()*Z}px`,height:`${e.getDimension()*Z}px`,"grid-template-columns":`repeat(${e.getDimension()}, 1fr)`,"grid-template-rows":`repeat(${e.getDimension()}, 1fr)`,left:`${e.getPos().x*Z}px`,top:`${gt(n,e)*Z}px`});function wt(n){return(()=>{const e=at.cloneNode(!0);return P(e,w(he,{get each(){return n.shape.render()},children:t=>w(_e,{color:ht,square:t})})),B(t=>{const s=xe.Shape,i=yt(n.board,n.shape);return s!==t._v$&&L(e,t._v$=s),t._v$2=ge(e,i,t._v$2),t},{_v$:void 0,_v$2:void 0}),e})()}const vt=M("<div></div>"),G=38.3,pt=n=>({width:`${n.getDimension()*G}px`,height:`${n.getDimension()*G}px`,"grid-template-columns":`repeat(${n.getDimension()}, 1fr)`,"grid-template-rows":`repeat(${n.getDimension()}, 1fr)`,left:`${n.getPos().x*G}px`,top:`${n.getPos().y*G}px`});function mt(n){return(()=>{const e=vt.cloneNode(!0);return P(e,w(he,{get each(){return n.shape.render()},children:t=>w(_e,{color:void 0,square:t})})),B(t=>{const s=xe.Shape,i=pt(n.shape);return s!==t._v$&&L(e,t._v$=s),t._v$2=ge(e,i,t._v$2),t},{_v$:void 0,_v$2:void 0}),e})()}const $t=M("<div><div></div></div>"),[q,re]=ue(Se()),[C,bt]=ue(new De),St=500,xt=()=>{let n=Oe("s");if(n?.fitsIn(C()))re(n);else{let e=new De(C()).addSquares(q());bt(e.collapseLines(e.checkLines())),re(Se())}},Oe=n=>{switch(n){case"a":return q().moveLeft();case"d":return q().moveRight();case"w":return q().rotate();case"s":return q().moveDown();case" ":return q().moveBottom(C());default:return null}},_t=n=>{let e=Oe(n.key);e?.fitsIn(C())&&re(e)},qt=()=>{document.addEventListener("keypress",_t,!1),setInterval(xt,St)},Ct=()=>(qt(),(()=>{const n=$t.cloneNode(!0),e=n.firstChild;return P(e,w(wt,{get board(){return C()},get shape(){return q()}}),null),P(e,w(mt,{get shape(){return q()}}),null),P(e,w(dt,{get board(){return C()}}),null),B(t=>{const s=oe.BoardView,i=oe.Board,o=`${C().getWidth()}px`,r=`${C().getHeight()}px`;return s!==t._v$&&L(n,t._v$=s),i!==t._v$2&&L(e,t._v$2=i),o!==t._v$3&&e.style.setProperty("width",t._v$3=o),r!==t._v$4&&e.style.setProperty("height",t._v$4=r),t},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),n})()),Bt=()=>w(Ct,{});Ze(()=>w(Bt,{}),document.getElementById("root"));
